<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link th:href="@{/css/japanMap.css}" rel="stylesheet">
<link th:href="@{/css/bootstrap.css}" rel="stylesheet">
<link th:href="@{/css/help.css}" rel="stylesheet">
<!-- iconj.com favicon code -->
<link rel="shortcut icon" href="http://www.iconj.com/icon.php?pid=f3tqyum2g6" type="image/x-icon" />
<link rel="shortcut icon" href="http://www.iconj.com/gif_icon.php?pid=f3tqyum2g6" type="image/gif" /> 
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/earlyaccess/nikukyu.css" rel="stylesheet">
<script type="text/javascript" src="/js/design.js"></script>
<!-- end of iconj.com favicon code -->

<!-- 画像が切り替わる -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script type="text/javascript">
$(function(){
    var setImg = '#photo';
    var fadeSpeed = 2600;
    var switchDelay = 5000;
    $(setImg).children('img').css({opacity:'0.6'});
    $(setImg + ' img:first').stop().animate({opacity:'1',zIndex:'20'},fadeSpeed);
    setInterval(function(){
        $(setImg + ' :first-child').animate({opacity:'0'},fadeSpeed).next('img').animate({opacity:'1'},fadeSpeed).end().appendTo(setImg);
    },switchDelay);
    
    //都道府県から検索するところページ遷移
    $("#find").on("change",function(){
		if ($("#find").val() == "prefecture") {
		window.location.href = '/prefecture';
	};
	});
    
  	//いいね高い順にページ遷移
    $("#find").on("change",function(){
		if ($("#find").val() == "highGood") {
		window.location.href = '/sortByHighGood';
	};
	});
  	
  　//いいね低い順にページ遷移
    $("#find").on("change",function(){
		if ($("#find").val() == "lowGood") {
		window.location.href = '/sortByLowGood';
	};
	});
    
    var data = [ [(${articleListForAutocomplete})] ];
    $("#searchAll").autocomplete({
    	source: data,
        autoFocus: true,
        delay: 500,
        minLength: 1
    });
});
</script>
<style>
input[type=search] {
	-webkit-appearance: none;
	display: inline-block;
	margin-right: 0;
	margin-bottom: 20px;
	padding: 10px;
	width: 200px;
	height: 40px;
	font-size: 100%;
	box-sizing: border-box;
	border-radius: 5px 0 0 5px;
	border: 1px solid #ccc;
	border-right: none;
}
input[type=submit] {
	-webkit-appearance: none;
	display: inline-block;
	padding: 0 10px;
	color: #fff;
	width: 50px;
	height: 40px;
	font-size: 100%;
	vertical-align: top;
	border: none;
	border-radius: 0 5px 5px 0;
	background: #1f76e2;
}
</style>
</head>
<body>

<header class="header">
<div class="balloon3">
<span sec:authorize="hasRole('ROLE_USER')" class="welcome" ><span sec:authentication="principal.user.name"></span>さんこんにちは！</span>
</div>

<ul class="bts">
<!-- ロゴ -->
<li class="buttons"><a th:href="@{/}" class="logo2"><span>tavikki</span></a></li>

<!-- ログインボタン -->
<li class="buttons">
<a th:href="@{/login}" class="Login" th:if="${preUserId}">
<span class="en">Login</span><br>
</a>
</li>

<!-- ログアウトボタン -->
<li class="buttons">
<a th:href="@{/logout}" class="Login" th:if="${userId}">
<span class="en">Logout</span><br>
</a>
</li>

<!-- 新規登録ボタン -->
<li class="buttons">
<a th:href="@{/register}" class="Login" th:if="${preUserId}">
<span class="en">Register</span><br>
</a>
</li>

<!-- 投稿ボタン -->
<li class="buttons">
<a th:href="@{/insert}" class="Login" th:if="${userId}">
<span class="en">Post</span><br>
</a>
</li>

<!-- サイドメニュー -->
<li class="buttons">
<a th:href="@{/sideMenu/question}" class="Login"><span class="en">Question</span><br></a></li>
<li class="buttons">
<a th:href="@{/sideMenu/review}" class="Login"><span class="en">Review</span></a></li>
</ul>



<!-- <ul class="side"> -->
<!-- <li><a href="#" class="nav"><span style="font-family: 'Cochin',sans-serif; font-size: 25px;">≡ M e n u</span></a><ul> -->
<!-- <li><a th:href="@{/sideMenu/question}"><span style="font-family: 'Apple Symbols',sans-serif;color:white;font-size: 20px;">QUESTION</span>　<span style="font-family: 'ヒラギノ明朝 ProN','Hiragino Mincho ProN',sans-serif;color:white;">質問</span></a></li> -->
<!-- <li><a th:href="@{/sideMenu/review}"><span style="font-family: 'Apple Symbols',sans-serif;color:white;font-size: 20px;">REVIEW</span>　<span style="font-family: 'ヒラギノ明朝 ProN','Hiragino Mincho ProN',sans-serif;color:white;">　評価</span></a></li> -->
<!-- </ul></li></ul></li> -->

</header>

<!-- 画像が切り替わる -->
<div id="photo">
<img th:src="@{/img/onsen.jpeg}" style="width:100%;">
<img th:src="@{/img/deer.jpeg}" style="width:100%;">
<img th:src="@{/img/eat.jpeg}" style="width:100%;">
<img th:src="@{/img/fuji.jpeg}" style="width:100%;">
<img th:src="@{/img/kyoto.jpeg}" style="width:100%;">
<img th:src="@{/img/asakusa.jpeg}" style="width:100%;">
</div>

<!-- 背景 -->
<div class="row1"></div>

<!-- 記事一覧表示 -->
<div class="row">
		<div class="col-sm-6 col-md-3">
			<div class="styleArticle" style="border-style: none; background-color: none;">
				<table class="table table-striped">
					<tbody>
						<tr th:each="article : ${articlePage}" class="col-md-4" style="height: 320px;padding-top:200px;padding-left: 100px;">
							<th><a th:href="@{'/showArticleDetail?id='+${article.id}}"> 
							<img th:src="${article.imagePath}" class="img-responsive img-rounded" id="thumbnail"></a><br> 
							<span th:text="${article.postDate}"></span><br>
							<a th:href="@{'/showArticleDetail?id='+${article.id}}"> 
							<span th:text="${article.title}"></span></a><br> 
							投稿者名 : <span th:text="${article.name}"></span><br>
							都道府県 : <span th:text="${article.prefecture}"></span><br>
							</th>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
</div>

<!-- プルダウンボタン -->
<form th:action="@{/findByInfo}" method="post">
<ul class="bts1">
<li class="search">
<select name="search" id="find">
    <option th:value="1">タイトル</option>
    <option th:value="2">投稿者名</option>
    <option th:value="3">内容</option>
    <option value="highGood">いいね数高い順</option>
    <option value="lowGood">いいね数低い順</option>
    <option value="prefecture">都道府県</option>
</select>
</li>

<!-- 検索ボックス -->
<li class="search">
<input type="search" name="contents" value="" placeholder="キーワード"><input type="submit" name="btn_search" id="searchAll">
</li></ul></form>


<!-- 記事上のタイトル -->
<div class="kakomi1">
<span class="en" style="font-size:100px;">Articles</span>
<span class="jp1" style="text-align:center">記事</span>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>

<!-- ページング機能 -->
<div th:if="${articlePage.totalPages > 0}" class="pagination"
   th:each="pageNumber : ${pageNumbers}">
   <a th:href="@{/(size=${articlePage.size},page=${pageNumber})}" th:text="${pageNumber}"
   th:class="${pageNumber==articlePage.number + 1} ? active"></a>
   </div>
</body>

<!-- フッダー -->
<footer class="footer">
<a th:href="@{/}" class="logo2"><span>tavikki</span></a>
<ul>
<li><a th:href="@{/}">会社情報</a> | </li>
<li><a th:href="@{/}">お知らせ</a> | </li>
<li><a th:href="@{/}">個人情報保護方針</a> | </li>
<li><a th:href="@{/}">ご利用にあたって</a> | </li>
<li><a th:href="@{/}">会員規約</a></li>
</ul>
</footer>
</html>